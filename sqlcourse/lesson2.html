<!DOCTYPE html>
<html lang="ro">
    <head>
        <title> Lectia 2. Crearea unei baze de date. </title>

        <!-- title icon -->
        <link rel="icon" href="../images/logo.png" type="image/icon type">

        <!-- css links -->
        <link rel="stylesheet" type="text/css" href="lesson.css">
    </head>
<body>
    <h2> Despre ce vom discuta azi: </h2>
    <ul>
        <li>
            <a href="#q1"> Crearea unei baze de date in SQL Server </a>
        </li>
        <li>
            <a href="#q2"> Cuvantul cheie "USE" </a>
        </li>
        <li>
            <a href="#q3"> Crearea tabelelor intr-o baza de date </a>
        </li>
        <li>
            <a href="#q4"> Tipuri de date in SQL </a>
        </li>
        <li>
            <a href="#q5"> Legaturile intre tabele </a>
        </li>
        <li>
            <a href="#q6"> Stergerea unui tabel </a>
        </li>
        <!--<li>
            <a href="#q7"> Diagrama unei baze de date. Diagrama Entitate-Relatie </a>
        </li>-->
    </ul>
    <hr>

    <h2 id="q1"> Crearea unei baze de date </h2>
    <p> Dupa cum am discutat la lectia anterioara, vom folos instrumentul SQL Server Management Studio pentru a crea, 
        manipula, modificare si pentru a face diferite operatii asupra unei baze de date.
    </p>
    <p> Pentru inceput ne conectam la serverul local. SQL Server Management Studio automat va detecta numele serverului,
        in cazul dat, serverul va fi computerul nostru. Pentru a crea o baza de date urmariti pasii de mai jos:
    </p>
    <ol>
        <li> 
            Click pe butonul [New Query]. 
            <br>
            <img src="../images/new_query.png">
        </li>
        <li>
            Va aparea o astfel de fereastra:
            <br>
            <img src="../images/new_query_window.png">
        </li>
        <li>
            Aici scrim codul care va crea baza de date:
            <br>
            <img src="../images/create_db_code.png">
        </li>
        <li>
            Executam aceasta interogare. Pentru a executa aceasta interograre, sau orice alta interogare,
            selectam codul pe care vrem sa il executam si dam click pe butonul [Execute]:
            <br>
            <img src="../images/exec_code.png">
        </li>
        <li>
            Observam ca interogare a fost executata cu succes:
            <br>
            <img src="../images/success_execute.png">
        </li>
        <li>
            Pentru a vedea daca baza de date a fost creata, click pe folderul [Databases] din meniul din stanga (Object Explorer),
            apoi click pe butonul [Refresh] pentru a face refresh la date:
            <br>
            <img src="../images/refresh.png">
        </li>
        <li>
            Observam ca baza de date a fost creata:
            <br>
            <img src="../images/angajatiDB.png">
        </li>
    </ol>
    <hr>
    <h2 id="q2"> Cuvantul cheie "USE"</h2>
    <p>
        "USE" este un cuvânt cheie în SQL Server care este utilizat pentru a specifica baza de date pe care doriți să o utilizați 
        pentru a executa o interogare sau o comandă.
    </p>
    <p>
        Sintaxa este următoarea:
        <br>
        <br>
        <code>
            <span class="key">USE</span> nume_baza_de_date
        </code>
    </p>
    <p>
        De exemplu, dacă doriți să utilizați baza de date "AngajatiDB", comanda "USE" ar arăta astfel:
        <br>
        <br>
        <code>
            <span class="key">USE</span> AngajatiDB
        </code>
    </p>
    <p>
        După ce ați specificat baza de date cu ajutorul comenzii "USE", toate comenzile ulterioare care sunt executate în acelasi 
        editor de interogare se vor executa în contextul acelei baze de date.
    </p>
    <hr>

    <h2 id="q3">Crearea tabelelor intr-o baza de date</h2>
    <p>
        Pentru a crea o tabelă într-o bază de date, puteți folosi sintaxa următoare în SQL Server:
    </p>
<pre>
<code>
<span class="key">CREATE TABLE</span> nume_tabel (
    coloana1 <span class="key">tip_data</span> constrangeri,
    coloana2 <span class="key">tip_data</span> constrangeri,
    ...,
    coloanaN <span class="key">tip_data</span> constrangeri
);
</code>
</pre>

    <p>
        În acest exemplu, trebuie să specificați numele tabelei, coloanele și tipurile lor de date, precum și orice constrângeri 
        pentru fiecare coloană. 
    </p>
    <p>
        Tipul de date specifică tipul de date pe care îl va stoca coloana, cum ar fi <span class="key">"int"</span> pentru un număr 
        întreg, <span class="key">"varchar"</span> pentru un șir de caractere cu lungime variabilă, <span class="key">"date"</span> 
        pentru o dată, și așa mai departe. 
    </p>
    <p>
        Constrângerile 
        pot fi de diferite tipuri, cum ar fi <span class="key">"NOT NULL"</span> pentru a impune ca o coloană să nu fie nulă, 
        <span class="key">"PRIMARY KEY"</span> pentru a declara 
        o coloană drept cheie primară a tabelului și așa mai departe.
    </p>
    <br>
    <p>
        De exemplu, dacă doriți să creați o tabelă numită "clienti" cu două coloane: "id_client" și "nume_client", comanda ar 
        arăta astfel:
    </p>
<pre>
<code>
<span class="key">CREATE TABLE</span> clienti (
    id_client <span class="key">int PRIMARY KEY</span>,
    nume_client <span class="key">varchar(50) NOT NULL</span>
);
</code>
</pre>

    <p>
        Aceasta va crea o nouă tabelă numită "clienti" cu două coloane: "id_client" și "nume_client". Coloana "id_client" este o 
        cheie primară și este de tip întreg, iar coloana "nume_client" este un șir de caractere cu o lungime maximă de 50 de 
        caractere și nu poate fi nulă.
    </p>
    <hr>
    
    <h2 id="q4"> Tipuri de date in SQL Server </h2>
    <p>
        SQL Server oferă o gamă largă de tipuri de date pentru a stoca diferite tipuri de date, cum ar fi numere întregi, valori 
        zecimale, șiruri de caractere, date și ore, valori booleane etc. Iată câteva dintre cele mai comune tipuri de date utilizate 
        în SQL Server:
    </p>
    <ul>
        <li>
            <span class="key">INT</span>: tipul de date pentru numere întregi, care pot fi pozitive, negative sau zero.
        </li>
        <li>
            <span class="key">BIGINT</span>: tipul de date pentru numere întregi mari, care pot fi pozitive, negative sau zero.
        </li>
        <li>
            <span class="key">DECIMAL(p, s)</span>: tipul de date pentru numere zecimale, care reprezintă numere cu p cifre în total, dintre care s sunt 
            cifrele după virgulă.
        </li>
        <li>
            <span class="key">FLOAT</span>: tipul de date pentru numere zecimale cu precizie dublă.
        </li>
        <li>
            <span class="key">CHAR(n)</span>: tipul de date pentru șiruri de caractere fixe, care pot avea o lungime de până la n caractere.
        </li>
        <li>
            <span class="key">VARCHAR(n)</span>: tipul de date pentru șiruri de caractere variabile, care pot avea o lungime de până la n caractere.
        </li>
        <li>
            <span class="key">DATE</span>: tipul de date pentru stocarea datelor.
        </li>
        <li>
            <span class="key">TIME</span>: tipul de date pentru stocarea timpului.
        </li>
        <li>
            <span class="key">DATETIME</span>: tipul de date pentru stocarea datei și a timpului.
        </li>
        <li>
            <span class="key">BOOLEAN</span>: tipul de date pentru stocarea valorilor logice TRUE sau FALSE.
        </li>
    </ul>
    <hr>

    <h2 id="q5"> Legaturile dintre tabele in SQL Server </h2>
    <p>
        În SQL Server, legăturile între tabele sunt create prin intermediul cheilor primare și cheilor externe.
    </p>
    <ul>
        <li>
            <b> Ce este o cheie primara in SQL Server? </b>
            <p>
                În SQL Server, o cheie primară (sau cheie principală) este o coloană sau un set de coloane care identifică în mod 
                unic fiecare înregistrare dintr-o tabelă. Aceasta este o cheie unică pentru o tabelă și este folosită pentru a 
                garanta integritatea datelor.
            </p>
            <p>
                Cheia primară poate fi definită la crearea tabelului sau prin modificarea structurii tabelului existent. Este 
                important să se mențină integritatea cheii primare prin restricționarea valorilor duplicate și prin asigurarea că 
                nu este posibil să se introducă valori nule în coloana sau setul de coloane care formează cheia primară.
            </p>
            <p>
                Iată un exemplu de creare a unei chei primare în SQL Server:
            </p>
<pre>
<code>
    <span class="key">CREATE TABLE</span> Tabela1 (
        ID <span class="key">INT PRIMARY KEY</span>,
        Nume <span class="key">VARCHAR(50)</span>
    );
</code>
</pre>
            <p>
                În acest exemplu, coloana ID este definită ca cheie primară a tabelului Tabela1. Aceasta înseamnă că fiecare 
                înregistrare din tabel va avea o valoare unică în coloana ID. Orice încercare de a introduce o valoare duplicată 
                în coloana ID va returna o eroare
            </p>
        </li>
        <li>
            <b> Ce este o cheie externa (straina)? </b>
            <p>
                În SQL Server, o cheie străină este o coloană sau un set de coloane dintr-o tabelă, care referă o coloană sau un 
                set de coloane dintr-o altă tabelă. Aceasta înseamnă că valorile din coloana cheii străine trebuie să corespundă cu 
                valorile din coloana cheii primare din tabela referențiată.
            </p>
            <br>
            <b> Exemplu: </b>
            <p>
                De exemplu, să presupunem că avem două tabele: Tabela1 și Tabela2, în care Tabela2 conține o referință către Tabela1 
                prin intermediul unei chei străine. Pentru a crea o cheie străină între cele două tabele, trebuie să adăugăm o 
                constrângere de cheie străină la tabela Tabela2:
            </p>
<pre>
<code>
    <span class="key">CREATE TABLE</span> Tabela1 (
        ID <span class="key">INT PRIMARY KEY</span>,
        Nume <span class="key">VARCHAR(50)</span>
    );

    <span class="key">CREATE TABLE</span> Tabela2 (
        ID <span class="key">INT PRIMARY KEY</span>,
        Data <span class="key">DATE</span>,
        Tabela1_ID <span class="key">INT FOREIGN KEY REFERENCES</span> Tabela1(ID)
    );
</code>
</pre>
            <p>
                În acest exemplu, cheia străină este creată pe coloana Tabela1_ID din Tabela2 și se referă la coloana ID din 
                Tabela1. Aceasta asigură că fiecare valoare din coloana Tabela1_ID din Tabela2 este validă și se referă la o 
                valoare existentă din coloana ID din Tabela1.
            </p>
            <p>
                Atentie! - Cand facem legatura intre 2 sau mai multe tabele, mai intai se creaza tabele de la care vom lua cheile 
                primare (adica tabelele parinte) iar mai apoi se creaza tabelele care contin cheile straina (adica tabelele copii).
            </p>
        </li>
    </ul>
    <hr>

    <h2 id="q6"> Stergerea unui tabel in SQL Server</h2>
    <p>
        În SQL Server, se poate șterge un tabel cu ajutorul instrucțiunii DROP TABLE. Această instrucțiune va elimina întregul 
        tabel și toate datele aferente.
    </p>
    <br>
    <b> Exemplu: </b>
    <code>
        <span class="key">DROP TABLE</span> nume_tabel;
    </code>
    <p>
        În acest exemplu, "nume_tabel" este numele tabelului pe care dorim să îl ștergem.
    </p>
    <p>
        Este important să rețineți că această instrucțiune va elimina permanent toate datele și structura tabelului, deci ar 
        trebui utilizată cu precauție și numai dacă sunteți sigur că doriți să ștergeți tabela. De asemenea, trebuie să fiți 
        atenți la faptul că dacă există constrângeri de cheie străină sau alte obiecte care depind de tabela respectivă, acestea 
        trebuie eliminate înainte de a putea șterge tabela.
    </p>
</body>
</html>